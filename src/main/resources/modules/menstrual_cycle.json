{
  "name": "Wearables_Sleep",
  "remarks": [ "" ],
  "states": {
    "Initial": {
      "type": "Initial",
      "conditional_transition": [
        {
          "transition": "Female",
          "condition": {
            "condition_type": "Gender",
            "gender": "F"
          }
        },
        {
          "transition": "Terminal"
        }
      ]
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Female": {
      "type": "Simple",
      "remarks": [
        "About one-in-five Americans use a smart watch or fitness tracker.  \n https://www.pewresearch.org/short-reads/2020/01/09/about-one-in-five-americans-use-a-smart-watch-or-fitness-tracker/"
      ],
      "distributed_transition": [
        {
          "transition": "Age_13-19",
          "distribution": 0.21
        },
        {
          "transition": "Age_20-29",
          "distribution": 0.21
        },
        {
          "transition": "Age_30-39",
          "distribution": 0.21
        },
        {
          "transition": "Age_40-49",
          "distribution": 0.21
        }
      ]
    },
    "Age_13-19": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 13,
        "high": 19,
        "unit": "years"
      }
    },
    "Age_20-29": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 20,
        "high": 29,
        "unit": "years"
      }
    },
    "Age_30-39": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 30,
        "high": 39,
        "unit": "years"
      }
    },
    "Age_40-49": {
      "type": "Delay",
      "direct_transition": "Endometriosis",
      "range": {
        "low": 40,
        "high": 49,
        "unit": "years"
      }
    },


    "Endometriosis": {
      "type": "ConditionOnset",
      "target_encounter": "Obgyn_Encounter",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 129103003,
          "display": "Endometriosis (disorder)"
        }
      ],
      "remarks": [ "" ],
      "distributed_transition": [
        {
          "transition": "Obgyn_Encounter",
          "distribution": 0.2
        },
        {
          "transition": "Symptom_Onset_Delay",
          "distribution": 0.79
        },
        {
          "transition": "Terminal",
          "distribution": 0.01
        }
      ]
    },
    "Symptom_Onset_Delay": {
      "type": "Delay",
      "direct_transition": "Menstrual_Cramps_Symptom",
      "range": {
        "low": 1,
        "high": 5,
        "unit": "years"
      }
    },
    "Menstrual_Cramps_Symptom": {
      "type": "Symptom",
      "symptom": "Cramps",
      "cause": "Endometriosis",
      "direct_transition": "Menstrual_Cramps_Symptom_Ends",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 431416001,
          "display": "Menstrual cramp (finding)"
        }
      ]
    },
    "Menstrual_Cramps_Symptom_Ends": {
      "type": "Symptom",
      "symptom": "Cramps",
      "cause": "Endometriosis",
      "direct_transition": "Endometriosis_End"
    },

    "Endometriosis_End": {
      "type": "ConditionEnd",
      "condition_onset": "Endometriosis",
      "direct_transition": "Terminal"
    },

    "Obgyn_Encounter": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "reason": "Gynecology_Exam",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185221008,
          "display": "Seen in gynecology clinic (finding)"
        }
      ],
      "direct_transition": "Gynecology_Exam"
    },


    "Obgyn_Encounter_End": {
      "type": "EncounterEnd",
      "direct_transition": "Terminal",
      "discharge_disposition": {
        "system": "NUBC",
        "code": "01",
        "display": "Discharged to home care or self care (routine discharge)"
      }
    },


    "Gynecology_Exam": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 60554003,
          "display": "Polysomnography (procedure)"
        }
      ],
      "duration": {
        "low": 5,
        "high": 10,
        "unit": "minutes"
      },
      "direct_transition": "Endocrinology_Sim"
    },
    "Endocrinology_Sim": {
      "type": "Physiology",
      "model": "Roblitz2013_Menstrual_Cycle.xml",
      "solver": "dormand_prince_54",
      "step_size": 1,
      "sim_duration": 28,
      "lead_time": 0,
      "inputs": [
        {
          "from_exp":  "#{BMI}",
          "to": "mass"
        }
      ],
      "outputs": [
        {
          "from_list": "E2",
          "to": "endocrinology_data",
          "type": "Attribute"
        }
      ],
      "direct_transition": "HormonePanel",
      "alt_direct_transition": "Sleep_Imaging"
    },
    "HormonePanel": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "2243-4",
          "display": "Estradiol (E2) [Mass/volume] in Serum or Plasma"
        }
      ],
      "sampled_data": {
        "attributes": [
          "endocrinology_data"
        ]
      },
      "direct_transition": "HormonePanel_Chart"
    },
    "HormonePanel_Chart": {
      "type": "Observation",
      "category": "procedure",
      "unit": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "2243-4",
          "display": "Estradiol (E2) [Mass/volume] in Serum or Plasma"
        }
      ],
      "attachment": {
        "chart": {
          "type": "line",
          "title": "Estradiol (E2) [Mass/volume] in Serum or Plasma",
          "axis_attribute_x": "time",
          "axis_attribute_y": "IU/L",
          "width": 400,
          "height": 200,
          "series": [
            {
              "attribute": "endocrinology_data"
            }
          ]
        }
      },
      "direct_transition": "Clear_endocrinology_data"
    },
    "Clear_endocrinology_data": {
      "type": "SetAttribute",
      "attribute": "endocrinology_data",
      "direct_transition": "Obgyn_Encounter_End"
    }
  },
  "gmf_version": 1
}